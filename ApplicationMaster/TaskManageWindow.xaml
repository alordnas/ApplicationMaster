<Window x:Class="Casamia.TaskManageWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
		xmlns:core ="clr-namespace:Casamia.Core"
        Height="560" Width="840" WindowStyle="None" AllowsTransparency ="True" WindowStartupLocation="CenterScreen" BorderBrush="Gray"
		BorderThickness="1" Background="#2d2d30"
        MouseLeftButtonDown="Window_MouseLeftButtonDown" Icon="Images/Logo.ico">
	<Grid>
		<Grid.RowDefinitions>
			<RowDefinition Height="32"/>
			<RowDefinition />
		</Grid.RowDefinitions>
		<Grid.ColumnDefinitions>
			<ColumnDefinition/>
		</Grid.ColumnDefinitions>
		<TextBlock HorizontalAlignment="Left" Height="30"  Width="130" FontSize="15" Foreground="Gray" Margin="10,3,0,0">
                    <Run Language="zh-cn" Text="任务管理器"/>
		</TextBlock>

		<StackPanel HorizontalAlignment="Right" VerticalAlignment="Top" Orientation="Horizontal" FlowDirection="RightToLeft" Margin="0,7,10,0">
			<Button x:Name="closeButton" Height="15" Width="22" Style="{DynamicResource ResourceKey=ColseButtonStyle}" VerticalAlignment="Top" Click="closeButton_Click"/>
			<Button x:Name="minimizeButton" Height="15" Width="22" Style="{DynamicResource ResourceKey=MinimizeButtonStyle}" VerticalAlignment="Top" />
		</StackPanel>

		<Border Grid.Row ="1" BorderBrush="#2d2d30" BorderThickness="10,0,10,10" Margin="1" Background="WhiteSmoke" >
			<Grid>
				<Grid.RowDefinitions>
					<RowDefinition />
				</Grid.RowDefinitions>
				<Grid.ColumnDefinitions>
					<ColumnDefinition Width="150"/>
					<ColumnDefinition/>
				</Grid.ColumnDefinitions>

				<GroupBox Header="任务列表" Margin="5" Background="Beige">
					<Grid Margin="10">
						<Grid.RowDefinitions>
							<RowDefinition />
						</Grid.RowDefinitions>
						<Grid.ColumnDefinitions>
							<ColumnDefinition/>
						</Grid.ColumnDefinitions>

						<ListBox x:Name="task_ListBox" 
								 ItemsSource="{Binding Source={x:Static core:TaskManager.ProtoTasks}}" 
								 Grid.ColumnSpan="2" 
								 Background="White" 
								 SelectionChanged="task_ListBox_SelectionChanged">
							<ListBox.ItemTemplate>
								<DataTemplate>
									<TextBlock Text="{Binding Name}" ></TextBlock>
								</DataTemplate>
							</ListBox.ItemTemplate>
						</ListBox>


					</Grid>
				</GroupBox>

				<Grid Grid.Column="1">
					<Grid.RowDefinitions>
						<RowDefinition />
						<RowDefinition Height="36"/>
					</Grid.RowDefinitions>
					<Grid.ColumnDefinitions>
						<ColumnDefinition/>
					</Grid.ColumnDefinitions>

					<GroupBox Grid.Column="1" Header="当前" Margin="5" Background="Beige">
						<Grid Margin="10">
							<Grid.RowDefinitions>
								<RowDefinition Height="36"/>
								<RowDefinition Height="36"/>
								<RowDefinition Height="28"/>
								<RowDefinition />
								<RowDefinition Height="36"/>
								<RowDefinition Height="182"/>
							</Grid.RowDefinitions>

							<StackPanel Orientation="Horizontal">
								<Label Margin="5" Content="任务名称："/>
								<TextBox 
									x:Name="taskName_TextBox" 
									Text="{Binding ElementName=task_ListBox, Path=SelectedItem.Name}" 
									Margin="0,5" 
									Width="200" 
									IsEnabled="True" >
								</TextBox>
								<Label Content="*"/>
							</StackPanel>

							<StackPanel Grid.Row="1" Orientation="Horizontal">
								<Label Margin="5" Content="任务描述："/>
								<TextBox x:Name="describe_TextBox" 
										 Text="{Binding ElementName=task_ListBox, Path=SelectedItem.Description}" 
										 Margin="0,5" 
										 Width="500" 
										 IsEnabled="True" >
								</TextBox>
							</StackPanel>

							<Label Grid.Row="2" Content="执行列表：" Margin="5,0"/>
							<ListBox x:Name="commandListBox"
									 ItemsSource="{Binding Path=Name}" 
									 Grid.Row="3" 
									 Margin="10,0"
									 Background="White"
									 SelectionChanged="subTask_ListBox_SelectionChanged">
							</ListBox>

							<StackPanel Grid.Row="4" Orientation="Horizontal" FlowDirection="RightToLeft" Margin="10,0">
								<Button x:Name="deleteSubTask_Button" Width="56" Margin="0,5,20,5" Content="删除" Click="deleteSubTask_Button_Click"/>
								<Button x:Name="clearSubTask_Button" Width="56" Margin="0,5,20,5" Content="清空" Click="clearSubTask_Button_Click"/>
							</StackPanel>
							<GroupBox Grid.Row="5" Header="内容" Margin="10,0" Background="AntiqueWhite">
								<Grid>
									<Grid.RowDefinitions>
										<RowDefinition Height="42"/>
										<RowDefinition Height="42"/>
										<RowDefinition Height="42"/>
										<RowDefinition Height="42"/>
									</Grid.RowDefinitions>

									<StackPanel Orientation="Horizontal">
										<Label Margin="8" Content="运行程序："/>
										<ComboBox ItemsSource="{Binding Source={x:Static  core:ExecutorManager.Instance}, Path=Executors}" x:Name="exe_ComboBox" Height="25" >
											<ComboBox.ItemTemplate>
												<DataTemplate>
													<TextBlock Text="{Binding Name}" ToolTip="{Binding Description}"></TextBlock>
												</DataTemplate>
											</ComboBox.ItemTemplate>
										</ComboBox>


									</StackPanel>

									<StackPanel Grid.Row="1" Orientation="Horizontal">
										<Label Margin="8" Content="参       数："/>
										<ComboBox x:Name="arg_Combox" ItemsSource="{Binding ElementName=exe_ComboBox , Path=SelectedItem.PotentialParameters}" Margin="0,10" Width="400" IsEditable="True">
										</ComboBox>
										<Button x:Name="addPath_Button" Content="+路径占位符" Margin="8" Width="90" Height="22" Click="addPath_Button_Click"/>
									</StackPanel>

									<StackPanel Grid.Row="2" Orientation="Horizontal">
										<Label Margin="8" Content="超       时："/>

										<TextBox x:Name="timeout_TextBox" Text="-1" Margin="0,10" Width="90"  TextChanged="timeout_TextBox_TextChanged">
										</TextBox>
										<Label Margin="0,8" Content="秒"/>
									</StackPanel>

									<StackPanel Grid.Row="3" Orientation="Horizontal" FlowDirection="RightToLeft">
										<Button x:Name="addSubTask_Button" Content="添加到执行列表" Margin="10" Width="120" Click="addSubTask_Button_Click" />
										<Button x:Name="coverSubTask_Button" Content="覆盖选中的内容" Margin="10" Width="120" Click="coverSubTask_Button_Click"/>

									</StackPanel>

								</Grid>
							</GroupBox>
						</Grid>
					</GroupBox>
					<StackPanel Grid.Row="1" Margin="27,0" Orientation="Horizontal" FlowDirection="RightToLeft">
						<Button x:Name="exit_Button" Margin="5" Width="60" Content="关闭" Click="exit_Button_Click" IsDefault="True"/>
						<Button x:Name="addTask_Button" Margin="5" Width="60" Content="新建" Click="addTask_Button_Click"/>
						<Button x:Name="saveTask_Button" Margin="5" Width="60" Content="应用" Click="saveTask_Button_Click"/>
						<Button x:Name="deleteTask_Button" Margin="5" Width="60" Content="删除" Click="deleteTask_Button_Click"/>
					</StackPanel>
				</Grid>

			</Grid>
		</Border>
	</Grid>
</Window>
